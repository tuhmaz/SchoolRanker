### 1. هيكلية قاعدة البيانات (The Backbone)
حالياً، قاعدة البيانات شبه فارغة. لكي نخزن البيانات، نحتاج إلى تصميم علائقي (Relational Design) قوي باستخدام Drizzle ORM .

الجداول المقترحة (Schema):

1. Users (المستخدمون):
   - المعلمين، الإداريين (مع نظام أدوار Roles: admin , teacher ).
   - بيانات الدخول، الاسم، المدرسة التابع لها.
2. AcademicYears (السنوات الدراسية):
   - لتخزين الأرشيف (مثلاً: 2023-2024، 2024-2025). يسمح بالعودة للسجلات القديمة.
3. Classes (الصفوف/الشعب):
   - اسم الصف (مثلاً: العاشر أ)، المعلم المسؤول (مربّي الصف).
4. Students (الطلاب):
   - البيانات الشخصية، الرقم الوطني، تاريخ الميلاد.
   - ربط الطالب بالصف (ClassID).
5. Subjects (المواد الدراسية):
   - اللغة العربية، الرياضيات، إلخ.
6. GradeBooks (سجلات العلامات):
   - جدول يربط (الطالب + المادة + نوع التقويم "شهر أول/ثاني" + العلامة).
7. Attendance (الحضور والغياب):
   - التاريخ، الحالة (حاضر، غائب، تأخير)، السبب.
8. BehaviorLogs (سلوك الطالب):
   - لتسجيل الملاحظات السلوكية (إيجابية أو سلبية).
### 2. رحلة المستخدم (User Journey) - النظام الجديد
بدلاً من (رفع ملف -> معالجة -> تحميل)، ستصبح العملية كالتالي:

1. التسجيل/الدخول: المعلم ينشئ حساباً ويسجل الدخول.
2. الإعداد (Onboarding):
   - يقوم المعلم بإنشاء صفوفه يدوياً أو استيرادها من Excel (سنستخدم الكود الحالي للاستيراد فقط).
   - يتم حفظ الطلاب في قاعدة البيانات الدائمة.
3. العمليات اليومية (Dashboard):
   - رصد الحضور: واجهة تقويم بسيطة للنقر على الطالب الغائب.
   - رصد العلامات: واجهة تشبه Excel داخل الموقع (Data Grid) لإدخال العلامات وحفظها فوراً.
4. التقارير (Reporting):
   - بضغطة زر، يقوم النظام بجلب البيانات من قاعدة البيانات وتوليد الشهادات أو التقارير (باستخدام القوالب الموجودة حالياً).
### 3. خارطة الطريق للتطوير (Roadmap)
سنقسم العمل إلى مراحل لضمان الجودة:
 المرحلة 1: التأسيس وقاعدة البيانات (Foundation)
- توسيع ملف shared/schema.ts ليشمل الجداول المذكورة أعلاه.
- تفعيل نظام المصادقة (Authentication) الكامل وحماية المسارات (Protected Routes). المرحلة 2: إدارة البيانات الأساسية (Core CRUD)
- بناء واجهات لإضافة/تعديل/حذف الطلاب والصفوف.
- تطوير ميزة "استيراد من Excel إلى قاعدة البيانات" (Import to DB) للاستفادة من الكود الحالي بدلاً من إدخال الطلاب يدوياً واحداً تلو الآخر. المرحلة 3: الوحدات الوظيفية (Modules)
- وحدة الحضور والغياب: واجهة تفاعلية لأخذ الحضور.
- وحدة العلامات: جدول تفاعلي لرصد العلامات وحساب المعدلات تلقائياً. المرحلة 4: التحليلات والتقارير (Analytics)
- لوحة تحكم (Dashboard) تعرض: نسبة الحضور، متوسط علامات الصف، الطلاب المتعثرين.
- توليد الشهادات بناءً على البيانات المخزنة.
### 4. أفكار إضافية ومميزات احترافية (Advanced Features)
لجعل المشروع متميزاً جداً ومنافساً:

1. بوابة أولياء الأمور (Parent Portal):
   - حساب لولي الأمر يمكنه من خلاله رؤية علامات ابنه وحضوره فقط (Read-only).
2. تحليل الذكاء الاصطناعي (AI Insights):
   - ميزة "تنبؤ الأداء": النظام ينبه المعلم أن "الطالب أحمد مستواه يتراجع في الرياضيات مقارنة بالشهر الماضي".
3. مولد الامتحانات (Exam Generator):
   - بنك أسئلة بسيط يسمح للمعلم بتخزين أسئلة وتوليد ورقة امتحان.
4. تصدير البيانات لمنصة OpenEMIS/أجيال:
   - تصدير ملف Excel مطابق تماماً للصيغة التي تطلبها الوزارة لرفع العلامات، مما يوفر عناء التنسيق اليدوي.
5. العمل دون اتصال (Offline Mode - PWA):
   - تحويل الموقع لـ PWA بحيث يستطيع المعلم رصد الحضور على هاتفه داخل الصف حتى بدون إنترنت، ويقوم النظام بالمزامنة عند عودة الاتصال.