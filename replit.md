# نظام إدارة سجلات الطلبة - منصة أجيال

## نظرة عامة
نظام متكامل لإدارة سجلات الطلبة والمعلمين مع معالجة تلقائية لملفات Excel من منصة أجيال الحكومية. يوفر النظام أدوات شاملة لإنشاء وطباعة وتصدير السجلات المدرسية المختلفة.

## التاريخ الأخير للتحديثات
- **12 أكتوبر 2024**: إطلاق النسخة 2.0 مع واجهة محدثة بالكامل
  - ✅ معالج متقدم لملفات Excel من منصة أجيال (EL_StudentInfoReport.xls)
  - ✅ استخلاص تلقائي للصفوف والشعب من الملف الوزاري
  - ✅ عرض تفصيلي للصفوف مع عدد الطلبة في كل شعبة
  - ✅ إضافة يدوية للمواد الدراسية لكل صف وشعبة
  - ✅ دعم كامل للـ RTL في جميع الصفحات
  - ✅ واجهة عربية احترافية مع Material Design
  - ✅ حفظ البيانات محلياً في المتصفح

## الميزات الرئيسية

### 1. معالجة ملفات Excel
- رفع ملف الطلبة من منصة أجيال (Excel: .xlsx, .xls)
- استخلاص تلقائي لبيانات الطلبة (الأسماء، الصفوف، الشعب)
- تجميع تلقائي حسب الصف والشعبة
- دعم أعمدة متعددة من منصة أجيال

### 2. التجهيزات الأساسية
- إدخال معلومات المعلم (الاسم، المديرية، المدرسة، البلدة)
- تحديد إذا كان المعلم مربي صف
- إدارة المواد الدراسية لكل صف وشعبة
- حفظ محلي للبيانات

### 3. سجلات متعددة
- **سجل علامات جانبي**: تنسيق احترافي جاهز للطباعة
- **سجل أداء وملاحظة**: تقييم شامل للطلبة
- **دفتر علامات رئيسي**: دفتر كامل مع دعم الطباعة على الوجهين
- **دفتر حضور وغياب**: تتبع يومي مع تقارير شهرية

### 4. نماذج الكشوفات
- نماذج متعددة لكل نوع من السجلات
- إمكانية الاختيار بين 3 نماذج لكل سجل
- تصاميم مختلفة (كلاسيكي، مفصل، مختصر)

### 5. دفتر الحضور والغياب
- تقويم تفاعلي لاختيار التاريخ
- تسجيل سريع للحضور والغياب
- إحصائيات تلقائية (عدد الحاضرين، الغائبين، النسبة)
- إمكانية تحديد الكل حاضر/غائب

### 6. التصدير والطباعة
- طباعة مباشرة لجميع السجلات
- تصدير إلى PDF بجودة عالية
- تصدير إلى Excel
- طباعة غلاف السجلات

## البنية التقنية

### Frontend
- **React** + **TypeScript** + **Wouter** (routing)
- **Tailwind CSS** + **Shadcn UI** (تصميم)
- **SheetJS (xlsx)** لمعالجة ملفات Excel
- **jsPDF** + **html2canvas** للتصدير إلى PDF
- **TanStack Query** لإدارة الحالة
- دعم كامل للـ RTL والعربية

### Backend
- **Express.js** (API server)
- **In-memory storage** (لا يتطلب قاعدة بيانات)
- حفظ محلي في المتصفح (localStorage)

### المكتبات الرئيسية
```json
{
  "xlsx": "معالجة ملفات Excel",
  "jspdf": "تصدير PDF",
  "jspdf-autotable": "جداول PDF",
  "html2canvas": "تحويل HTML إلى صور",
  "lucide-react": "الأيقونات",
  "font-awesome": "أيقونات إضافية"
}
```

## هيكل الملفات

```
client/src/
├── components/
│   ├── AppSidebar.tsx          # القائمة الجانبية
│   ├── FileUploadZone.tsx      # منطقة رفع الملفات
│   ├── LoadingOverlay.tsx      # شاشة التحميل
│   ├── ClassSubjectManager.tsx # إدارة الصفوف والمواد
│   ├── TemplateSelector.tsx    # اختيار النماذج
│   ├── AttendanceCalendar.tsx  # تقويم الحضور
│   └── ThemeToggle.tsx         # تبديل الوضع الليلي
├── pages/
│   ├── Settings.tsx            # التجهيزات الأساسية
│   ├── SideGradebook.tsx       # سجل علامات جانبي
│   ├── Performance.tsx         # سجل أداء وملاحظة
│   ├── MainGradebook.tsx       # دفتر علامات رئيسي
│   ├── Attendance.tsx          # دفتر حضور وغياب
│   ├── Templates.tsx           # اختيار نماذج الكشوفات
│   ├── Instructions.tsx        # التعليمات
│   └── About.tsx               # عن النظام
├── lib/
│   └── excelParser.ts          # معالج ملفات Excel
└── App.tsx                     # التطبيق الرئيسي

server/
├── routes.ts                   # API routes
└── storage.ts                  # In-memory storage
```

## كيفية الاستخدام

### 1. رفع ملف الطلبة
1. احصل على كشف الطلبة من منصة أجيال:
   - سجل الدخول → القوائم والخدمات → التقارير → كشف الطلبة
2. قم برفع الملف في صفحة "التجهيزات الأساسية"
3. سيتم استخلاص الصفوف والشعب تلقائياً

### 2. إدخال المعلومات
- أدخل اسم المعلم والمديرية والمدرسة والبلدة
- حدد إذا كنت مربي صف واختر صفك
- أضف المواد الدراسية لكل صف

### 3. حفظ البيانات
- اضغط "حفظ التجهيزات" لحفظ جميع البيانات
- البيانات محفوظة محلياً في المتصفح

### 4. إنشاء السجلات
- اختر نوع السجل من القائمة الجانبية
- اضغط "معالجة وإنشاء السجل"
- قم بالطباعة أو التصدير

## تنسيق ملف Excel المدعوم

يجب أن يحتوي الملف على الأعمدة التالية (بأي ترتيب):
- **اسم الطالب** أو **الاسم** أو **Student Name** أو **Name**
- **الصف** أو **Class** أو **الصف الدراسي**
- **الشعبة** أو **Division** أو **الشعبة الدراسية**
- (اختياري) **الجنس** أو **Gender**
- (اختياري) **تاريخ الميلاد** أو **Birth Date**

## التخزين المحلي

يتم حفظ البيانات التالية في localStorage:
```json
{
  "teacherName": "اسم المعلم",
  "directorate": "المديرية",
  "school": "المدرسة",
  "town": "البلدة",
  "isHomeroom": true/false,
  "homeroomClass": "id الصف",
  "classes": [...],
  "students": [...]
}
```

## الأمان والخصوصية
- جميع البيانات محفوظة محلياً في المتصفح
- لا يتم إرسال أي بيانات إلى خوادم خارجية
- يمكن مسح جميع البيانات من زر "إعادة تعيين"

## المتطلبات
- متصفح حديث يدعم JavaScript
- دعم localStorage
- اتصال بالإنترنت (للخطوط والأيقونات فقط)

## التطوير المستقبلي
- [ ] إضافة نماذج كشوفات إضافية
- [ ] تطوير نظام الإحصائيات والتقارير
- [ ] إضافة ميزة المقارنة بين الفصول الدراسية
- [ ] إنشاء قوالب مخصصة قابلة للتعديل
- [ ] دعم استيراد من مصادر متعددة

## الدعم الفني
- البريد الإلكتروني: support@school-system.jo
- واتساب: +962700000000

---
© 2024 نظام إدارة سجلات الطلبة - النسخة 2.0
